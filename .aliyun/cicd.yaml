kind: Pipeline
name: pipeline-run-<%.releaseVersion%>
spec:
  context:
    data:
      appName: next-template
  templateSpec:
    context:
      data:
        envName: next-template-production
        appName: next-template
        deployFile: s.yaml
    tasks:
      - context:
          data:
            displayName: 构建部署
            enable: true
            steps:
              - plugin: '@serverless-cd/s-setup'
              - plugin: '@serverless-cd/runtime-setup'
                inputs:
                  runtime:
                    - nodejs20
              - plugin: '@serverless-cd/checkout'
              - plugin: '@serverless-cd/s-deploy'
                inputs:
                  debugMode: true
        name: build-and-deploy
        runAfters: []
        taskTemplate: serverless-runner-task
